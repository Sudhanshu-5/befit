<!-- <%=calorieinfo.macroNutrientInfo%> -->
<canvas id="calorieChart" width="400" height="100"></canvas>
<script>
		length = <%-calorieinfo.macroNutrientInfo.length%>;

let consumedArray=[];
let burnedArray=[];
let dates=[];
console.log("selected"+typeof(selected) +" "+selected)

var ctx = document.getElementById("calorieChart").getContext("2d");



		if(<%-JSON.stringify(selected)%> == "today"){
	     labels.push('<%-(new Date(calorieinfo.macroNutrientInfo[length-1].createdAt)).toLocaleDateString()%>'),
		dataPoints.push({
			
				label: '<%-(new Date(calorieinfo.macroNutrientInfo[length-1].createdAt)).toLocaleDateString()%>',
				data: [<%-calorieinfo.macroNutrientInfo[length-1].totalCaloriesConsumed%>,<%calorieinfo.macroNutrientInfo[length-1].totalCaloriesBurned%>]
		});
		}
	

		else if(<%-JSON.stringify(selected)%> == "yesterday"){
			     labels.push('<%-(new Date(calorieinfo.macroNutrientInfo[length-2].createdAt)).toLocaleDateString()%>'),

			dataPoints.push({
				label: "<%-(new Date(calorieinfo.macroNutrientInfo[length-2].createdAt)).toLocaleDateString()%>",
				data: [<%-calorieinfo.macroNutrientInfo[length-2].totalCaloriesConsumed%>,<%-calorieinfo.macroNutrientInfo[length-2].totalCaloriesBurned%>]
			});
		}

		else{
		
		<%calorieinfo.macroNutrientInfo.forEach(function(info){%>
			        dates.push('<%-(new Date(info.createdAt)).toLocaleDateString()%>');
		
					consumedArray.push('<%-info.totalCaloriesConsumed%>');
					burnedArray.push('<%-info.totalCaloriesBurned%>')
		<%})%>
		// }
var data = {
  labels:dates,
  datasets: [{
    label: "calories consumed",
    backgroundColor: "blue",
    data:consumedArray
  }, {
    label: "Burned calories",
    backgroundColor: "red",
    data: burnedArray
  }]
};
var myBarChart = new Chart(ctx, {
  type: 'bar',
  data: data,
  options: {
    barValueSpacing: 20,
    scales: {
      yAxes: [{
        ticks: {
          min: 0,
        }
      }]
    }
  }
});
</script>


